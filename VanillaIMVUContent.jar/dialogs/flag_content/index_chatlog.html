<!DOCTYPE HTML>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">


    <title>Flag Content</title>
    <link rel="stylesheet" href="FlagDialogContent.css">
    <script src="../../js/jquery-1.6.js"></script>
    <script src="../../js/underscore.js"></script>
    <script src="../../js/imvu.js"></script>
    <script src="FlagDialogContent.js"></script>
    <script src="FlagChatLog.js"></script>
    <style type="text/css">
        #display-last-container {
            margin-top: 15px;
        }
        #display-last-container.not-used {
            opacity: 0;
        }
        #display-last-container .display-last {
            margin-left: 5px;
            margin-right: 5px;
            color: #4499fe;
            cursor: pointer;
        }
        #display-last-container .display-last.disabled {
            opacity: 0;
            cursor: default;
        }
        #display-last-container .display-last-sep.disabled {
            opacity: 0;
            cursor: default;
        }
        #display-last-container .display-last.selected {
            color: white;
            cursor: default;
        }
        #chat-log-container {
            position: relative;
            margin-top: 5px;
            margin-left: -10px;
            margin-right: -10px;
            height: 200px;
            overflow: auto;
            background: -moz-linear-gradient(top, #141415, #232326);
            border: solid 1px #4b4b4b;
            -moz-border-radius: 2px;
            padding-top: 3px;
            padding-bottom: 3px;
        }
        #chat-log-container .chat-line {
            margin-left: 10px;
        }
    </style>
</head><body>
    <div id="dialog" class="dialog-content">
        <header>
            <h1 id="title"></h1>
            <div class="close"></div>
        </header>
        <hr class="standard">
        <div id="content">
           <p class="dialog-message-text"></p>
           
           <div id="display-last-container">
               <script id="inline_translate">_iT("Display last:", "inline_translate")</script>
               <span class="display-last" id="display-last-25"><script id="inline_translate">_iT("25 lines", "inline_translate")</script></span><script id="inline_translate">_iT("|", "inline_translate")</script>
               <span class="display-last" id="display-last-50"><script id="inline_translate">_iT("50 lines", "inline_translate")</script></span>
               <span class="display-last-sep" id="display-last-sep-100"><script id="inline_translate">_iT("|", "inline_translate")</script></span>
               <span class="display-last" id="display-last-100"><script id="inline_translate">_iT("100 lines", "inline_translate")</script></span>
           </div>
           <div id="chat-log-container"></div>
           
           <div class="dialog-result-container">
               <img src="../img/check_green.png">
               <script id="inline_translate">_iT("Flag report sent!", "inline_translate")</script>
           </div>

        </div>
        <hr class="shadow">
        <div class="flag-content-spinner"></div>
        <footer>
            <div id="button-bar">
                <button class="cancel-button imvu-button level2 white-text dark-gray"><script id="inline_translate">_iT("Cancel", "inline_translate")</script></button>
                <button class="submit-button imvu-button level2 light-gray"><script id="inline_translate">_iT("Flag", "inline_translate")</script></button>
                <button class="close-button imvu-button level2 white-text dark-gray hidden"><script id="inline_translate">_iT("Close", "inline_translate")</script></button>
            </div>
        </footer>
    </div>

    <script>
    if (IMVU.runJS()) {
        var dialogInfo = imvu.call('getDialogInfo');
        if (IMVU.IS_FIREFOX) {
            var numChatMessages = 5;
            var chatLog = [];
            for (var i = numChatMessages; i > 3; i--) {
                chatLog.push(['user_' + i, 'message ' + i]);
            }
            chatLog.push(['user_3', 'after colon: this must be shown']);
            chatLog.push(['user_2_empty', '']);
            chatLog.push(['user_1_long_long_long_long_long', 'long long long long long long long long long long long long long long long long long long long long long long long long']);
            dialogInfo = {
                'content': {'title': 'This should not be shown (should be "Flag Chat")', 
                            'id': 9255,
                            'chatLog': chatLog,
                            'dialogSize': [800, 600],
                            'avatarNameColorMap': {'user_3': [125, 188, 199], 
                                                   'user_1_long_long_long_long_long': [10, 100, 300]},
                            'message_index': numChatMessages - 2,
                            },
                'message': 'Fake... number of chat messages: ' + numChatMessages,
                'title': _T('Flagging Chat'),
                };
            serviceRequest = function(args) {
                args.callback({'result': 'success'}, null);
            };
        }
        IMVU.Client.FlagContentDialog = new FlagChatLog({
            root: '.dialog-content',
            imvu: imvu,
            network: IMVU.Network,
            dialogInfo: dialogInfo,
            message: dialogInfo.message});
        if (IMVU.IS_FIREFOX) {
            imvu.call = function(arg) {
                if (arg == 'doSubmit') {
                    IMVU.Client.FlagContentDialog.showSubmitResult(1);
                }
            }
        }
    }
    </script>
</body></html>