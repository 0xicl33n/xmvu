<!DOCTYPE HTML>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">


    <script src="../js/jquery-1.6.js"></script>
    <script src="../js/underscore.js"></script>
<link rel="stylesheet" type="text/css" href="../yui/reset-fonts-grids-base-min.css">
    <link rel="stylesheet" type="text/css" href="../yui/container/assets/container.css">
    <link rel="stylesheet" type="text/css" href="../yui/datatable/assets/datatable.css">
    <link rel="stylesheet" type="text/css" href="../yui/paginator/assets/paginator-core.css">
    <link rel="stylesheet" type="text/css" href="../yui/paginator/assets/skins/sam/paginator.css">
    <link rel="stylesheet" type="text/css" href="../filter/FilterControl.css">
    <link rel="stylesheet" type="text/css" href="../search/SearchBox.css">
    <link rel="stylesheet" type="text/css" href="../css/YUIPaginator.css">
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" type="text/css" href="ThumbnailView.css">
    <link rel="stylesheet" type="text/css" href="../widgets/button/imvuButton.css">
    <style>
        #doc3 {margin:auto;}
    </style>

    <script src="../widgets/button/imvuButton.js"></script>
    <script src="../yui/yahoo-dom-event/yahoo-dom-event.js"></script>
    <script src="../yui/element/element-beta.js"></script>
    <script src="../yui/datasource/datasource.js"></script>

    <script src="../yui/json/json.js"></script>
    <script src="../yui/connection/connection.js"></script>
    <script src="../yui/paginator/paginator.js"></script>
    <script src="../yui/datatable/datatable.js"></script>
    <script src="../yui/event-mouseenter/event-mouseenter.js"></script>

    <script src="../js/imvu.js"></script>
    <script src="../js/FakeImvu.js"></script>
    <script src="../js/FakeNetwork.js"></script>
    <script src="../js/eventbus.js"></script>
    <script src="../js/DataSource.js"></script>
    <script src="../yui/container/container.js"></script>
    <script src="../yui/animation/animation.js"></script>

    <script src="ThumbnailView.js"></script>
    <script src="../js/YUIPaginator.js"></script>
    <script src="../filter/FilterControl.js"></script>
    <script src="../js/Timer.js"></script>
    <script src="../search/SearchBox.js"></script>

    <script>
        function focusSearch() {
            document.getElementById("search_input").focus();
        }
    </script>
</head><body>
    <div id="findPeopleFilter">
        <div id="findPeopleSearchFormAndActiveFilters">
        <div id="findPeopleSearchForm" class="heading">
            <div id="search" class="search-box">
                <div class="lt"></div>
                <div class="input">
                    <span><script id="inline_translate">_iT("Search by interest or avatar name", "inline_translate")</script></span>
                    <form><input id="search_input" type="text"></form>
                </div>
                <div class="rt"></div>
            </div>
        </div>
        <div class="filters-title heading"><script id="inline_translate">_iT("Filters", "inline_translate")</script></div>
        <div class="filters-active">
            <ul>
            </ul>
        </div>
        </div>
        <div id="findPeopleAllFilters" class="filters-all">
            <ul>
            <li class="filter-expanded" imvu:notforteens="true" imvu:key="age"><script id="inline_translate">_iT("Age", "inline_translate")</script>
                <ul class="filter-options">
                    <li imvu:value="18-24" imvu:headertext="18 to 24"><span class="notranslate">18</span> <script id="inline_translate">_iT("to", "inline_translate")</script> <span class="notranslate">24</span></li>
                    <li imvu:value="25-34" imvu:headertext="25 to 34"><span class="notranslate">25</span> <script id="inline_translate">_iT("to", "inline_translate")</script> <span class="notranslate">34</span></li>
                    <li imvu:value="35-50" imvu:headertext="35 to 50"><span class="notranslate">35</span> <script id="inline_translate">_iT("to", "inline_translate")</script> <span class="notranslate">50</span></li>
                    <li imvu:value="51-99" imvu:headertext="50+"><span class="notranslate">50+</span></li>
                </ul>
            </li>
            <li class="filter-expanded" imvu:key="gender"><script id="inline_translate">_iT("Gender", "inline_translate")</script>
                <ul class="filter-options">
                    <li imvu:value="0" imvu:headertext="Women"><script id="inline_translate">_iT("Women", "inline_translate")</script></li>
                    <li imvu:value="1" imvu:headertext="Men"><script id="inline_translate">_iT("Men", "inline_translate")</script></li>
                </ul>
            </li>
            <li class="filter-expanded" imvu:key="location"><script id="inline_translate">_iT("Location", "inline_translate")</script>
                <ul class="filter-options">
                    <select imvu:source="/api/countries.php" class="select-location">
                        <option><script id="inline_translate">_iT("Loading...", "inline_translate")</script></option>
                    </select>
                </ul>
            </li>
            <li imvu:key="relationship"><script id="inline_translate">_iT("Relationship", "inline_translate")</script>
                <ul class="filter-options">
                    <li imvu:value="1" imvu:headertext="Relationship: Single"><script id="inline_translate">_iT("Single", "inline_translate")</script></li>
                    <li imvu:value="2" imvu:headertext="Relationship: Seeing Someone"><script id="inline_translate">_iT("Seeing Someone", "inline_translate")</script></li>
                    <li imvu:value="3" imvu:headertext="Relationship: In a relationship"><script id="inline_translate">_iT("In a relationship", "inline_translate")</script></li>
                    <li imvu:value="4" imvu:headertext="Relationship: Married"><script id="inline_translate">_iT("Married", "inline_translate")</script></li>
                    <li imvu:value="5" imvu:headertext="Relationship: Divorced"><script id="inline_translate">_iT("Divorced", "inline_translate")</script></li>
                    <li imvu:value="6" imvu:headertext="Relationship: Other"><script id="inline_translate">_iT("Other", "inline_translate")</script></li>
                </ul>
            </li>
            <li imvu:key="orientation"><script id="inline_translate">_iT("Orientation", "inline_translate")</script>
                <ul class="filter-options">
                    <li imvu:value="1" imvu:headertext="Orientation: Straight"><script id="inline_translate">_iT("Straight", "inline_translate")</script></li>
                    <li imvu:value="2" imvu:headertext="Orientation: Gay / Lesbian"><script id="inline_translate">_iT("Gay / Lesbian", "inline_translate")</script></li>
                    <li imvu:value="3" imvu:headertext="Orientation: Bisexual"><script id="inline_translate">_iT("Bisexual", "inline_translate")</script></li>
                    <li imvu:value="4" imvu:headertext="Orientation: Questioning"><script id="inline_translate">_iT("Questioning", "inline_translate")</script></li>
                    <li imvu:value="5" imvu:headertext="Orientation: Other"><script id="inline_translate">_iT("Other", "inline_translate")</script></li>
                </ul>
            </li>
            <li imvu:key="here_for"><script id="inline_translate">_iT("Here for", "inline_translate")</script>
                <ul class="filter-options">
                    <li imvu:value="1" imvu:headertext="Here for: Chatting"><script id="inline_translate">_iT("Chatting", "inline_translate")</script></li>
                    <li imvu:value="2" imvu:headertext="Here for: Dating"><script id="inline_translate">_iT("Dating", "inline_translate")</script></li>
                    <li imvu:value="3" imvu:headertext="Here for: Relationships"><script id="inline_translate">_iT("Relationships", "inline_translate")</script></li>
                    <li imvu:value="4" imvu:headertext="Here for: Friendship"><script id="inline_translate">_iT("Friendship", "inline_translate")</script></li>
                    <li imvu:value="5" imvu:headertext="Here for: Other"><script id="inline_translate">_iT("Other", "inline_translate")</script></li>
                </ul>
            </li>
            <li imvu:key="has_vip_pass" imvu:linknamedurl="vippass"><script id="inline_translate">_iT("VIP", "inline_translate")</script>
                <ul class="filter-options">
                    <li imvu:value="1" imvu:headertext="VIP"><script id="inline_translate">_iT("VIP", "inline_translate")</script></li>
                </ul>
            </li>
            <li imvu:key="has_access_pass" imvu:requiresap="true" imvu:linknamedurl="accesspass"><script id="inline_translate">_iT("Access Pass", "inline_translate")</script>
                <ul class="filter-options">
                    <li imvu:value="1" imvu:headertext="Access Pass"><script id="inline_translate">_iT("AP", "inline_translate")</script></li>
                </ul>
            </li>
            <li imvu:key="age_verified"><script id="inline_translate">_iT("Age Verified", "inline_translate")</script>
                <ul class="filter-options">
                    <li imvu:value="1" imvu:headertext="Age Verified"><script id="inline_translate">_iT("Age Verified", "inline_translate")</script></li>
                </ul>
            </li>
            <li imvu:key="is_developer"><script id="inline_translate">_iT("Creator", "inline_translate")</script>
                <ul class="filter-options">
                    <li imvu:value="1" imvu:headertext="Creator"><script id="inline_translate">_iT("Creator", "inline_translate")</script></li>
                </ul>
            </li>
            <li imvu:key="online" imvu:defaultvalue="1"><script id="inline_translate">_iT("Online Now", "inline_translate")</script>
                <ul class="filter-options">
                    <li imvu:value="1" imvu:headertext="Online Now"><script id="inline_translate">_iT("Online Now", "inline_translate")</script></li>
                </ul>
            </li>
            </ul>
        </div>
    </div>
    <div id="roomList">
        <div id="findPeoplePagination" class="yui-skin-sam paginator"></div>
        <div class="thumbnail-view">
            <div id="thumbnailView"></div>
        </div>
        <div id="roomDataGrid"></div>
    </div>
    <script>
    if (IMVU.runJS()) {
        var dataSource = createDataSource(IMVU.Network, imvu);
        var paginator = new IMVU.YUIPaginator(['findPeoplePagination'], dataSource);

        var list = new ThumbnailView('thumbnailView', dataSource, imvu);

        var search = new IMVU.Client.widget.SearchBox(document.getElementById('search'));
        search.onTextChange.subscribe(function(evt, args) {
            dataSource.setQueryParameter('interests', args.join(' '));
            if (paginator.getCurrentPage() <= 1) {
                dataSource.refresh();
            } else {
                paginator.setPage(1);
            }
        });

        var filterElement = document.getElementById('findPeopleFilter');
        prepareFilterUIForCustomer(filterElement, imvu.call);
        var filters = new FilterControl(filterElement, dataSource, IMVU.Network, imvu);

        function refreshFiltersTopEdgeSoScrollbarWorks() {
            YAHOO.util.Dom.get('findPeopleAllFilters').style.top = YAHOO.util.Dom.get('findPeopleSearchFormAndActiveFilters').offsetHeight + 'px';
        }

        filters.onStateChange.subscribe(function(evt, args) {
            if (paginator.getCurrentPage() <= 1) {
                dataSource.refresh();
            } else {
                paginator.setPage(1);
            }
            refreshFiltersTopEdgeSoScrollbarWorks();
        });

        filters.onFilterExpandChange.subscribe(refreshFiltersTopEdgeSoScrollbarWorks);

        dataSource.refresh();
        refreshFiltersTopEdgeSoScrollbarWorks();
    }
    </script>
</body></html>