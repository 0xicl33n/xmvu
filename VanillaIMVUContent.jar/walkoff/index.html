<!DOCTYPE HTML>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">


    <script src="../js/jquery-1.6.js"></script>
    <script src="../js/underscore.js"></script>
    <script src="../js/imvu.js"></script>
    <script src="../js/Timer.js"></script>
    <script src="../js/time.js"></script>
    <script src="../js/eventbus.js"></script>
    <script src="../js/jquery.jscrollpane.js"></script>
    <script src="../js/jquery.mousewheel.js"></script>
    <script src="animation.js"></script>
    <script src="cancelableTimer.js"></script>
    <script src="frametimer.js"></script>
    <script src="idset.js"></script>
    <script src="imqClient.js"></script>
    <script src="loadingDialog.js"></script>
    <script src="walkOffCountdown.js"></script>
    <script src="walkOffElectrostaticGenerator.js"></script>
    <script src="walkOffLeaderboard.js"></script>
    <script src="walkOffGame.js"></script>
    <script src="walkOffGreenroom.js"></script>
    <script src="walkOffInviteDialog.js"></script>
    <script src="walkOffMenu.js"></script>
    <script src="walkOffMode.js"></script>
    <script src="walkOffPVPService.js"></script>
    <script src="walkOffPlaque.js"></script>
    <script src="walkOffSettingsPanel.js"></script>
    <script src="walkOffVipUpsellDialog.js"></script>

    <link rel="stylesheet" type="text/css" href="../yui/reset-fonts-grids-base-min.css">
    <link rel="stylesheet" type="text/css" href="../widgets/button/imvuButton.css">
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" type="text/css" href="walkOffPlaque.css">
    <link rel="stylesheet" type="text/css" href="dialogs.css">
    <link rel="stylesheet" type="text/css" href="../js/jquery.jscrollpane.css">
    <link rel="stylesheet" type="text/css" href="colors.css">

    <title>Walk Off</title>
</head><body>
    <div class="Babyface-loadmepls"><script id="inline_translate">_iT("I make a font load.  Hi!", "inline_translate")</script></div>
    <div id="walkoff">
        <div class="template">
            <div class="leaderboard">
                <div class="leaderboard-bg"></div>
                <div class="title"><script id="inline_translate">_iT("Weekly Leaderboard", "inline_translate")</script></div>
                <div class="tab_title all-time"><script id="inline_translate">_iT("IMVU", "inline_translate")</script></div>
                <div class="column_header rank"><script id="inline_translate">_iT("Rank", "inline_translate")</script></div>
                <div class="template">
                    <div class="friend">
                        <div class="rank_icon">
                            <div class="rank_number"></div>
                        </div>
                        <div class="portrait"></div>
                        <div class="name"></div>
                        <div class="score"></div>
                        <div class="info_button"></div>
                        <div class="offline"><img src="../tab_bar/../walkoff_img/presence_donotdisturb.png"><script id="inline_translate">_iT("Offline", "inline_translate")</script></div>
                        <div class="online"><img src="../img/available.png"></div>
                        <div class="self_rank"><script id="inline_translate">_iT("Rank:", "inline_translate")</script> <div class="rank_number"></div></div>
                    </div>
                </div>
                <div class="list"></div>
                <div class="vip_upsell">
                    <div class="upsell_text">
                        <script id="inline_translate">_iT("Only VIPs can compete", "inline_translate")</script><br>
                        <script id="inline_translate">_iT("on the IMVU leaderboard", "inline_translate")</script><br>
                        <script id="inline_translate">_iT("and earn Credits!", "inline_translate")</script><br>
                        <script id="inline_translate">_iT("Get VIP now and win!", "inline_translate")</script>
                        <div class="button"><script id="inline_translate">_iT("Get VIP", "inline_translate")</script></div>
                    </div>
                </div>
                <div class="self_entry_bg">
                    <div class="self_entry_container"></div>
                </div>
                <div class="side-tab"></div>
            </div>
        </div>
        <div class="template">
            <div class="vip-upsell-dialog dialog-background">
                <div class="info-dialog">
                    <div class="vip-logo"></div>
                    <div class="title"><script id="inline_translate">_iT("VIP Access only!", "inline_translate")</script></div>
                    <div class="body-text"><script id="inline_translate">_iT("We are excited to have an IMVU leaderboard competition going on. VIP members are being given exclusive access to it. Get VIP now and see how you are doing compared to other VIP players!", "inline_translate")</script></div>
                    <img class="vip-upsell-image" src="../walkoff_img/vip_upsell_graphic.png">
                    <div class="close"></div>
                    <div class="cancel button"><script id="inline_translate">_iT("Cancel", "inline_translate")</script></div>
                    <div class="getvip button"><script id="inline_translate">_iT("Get VIP", "inline_translate")</script></div>
                </div>
            </div>
        </div>
        <div class="menu">
            <div class="menu-frame">
                <div class="promo_container">
                    <div class="leaderboard_promo">
                        <div class="title"></div>
                        <div class="body"></div>
                    </div>
                </div>
                <div class="logo"></div>
                <div class="avname"></div>
                <div class="leaderboard_container_menu"></div>
                <div class="menu_button new_game"></div>
                <div class="menu_button invite"></div>
                <div class="menu_button settings"></div>
                <div class="menu_button how_to_play"></div>
            </div>
            <div class="how-to-frame">
                <div class="menu_button back_to_menu"></div>
            </div>
            <div class="invite-dialog dialog-background">
                <div class="info-dialog">
                    <div class="title"><script id="inline_translate">_iT("Friend requests and invitations", "inline_translate")</script></div>
                    <div class="friend-list box">
                        <div class="content dark">
                            <div class="header"><script id="inline_translate">_iT("invite friends", "inline_translate")</script></div>
                            <div class="label count"><script id="inline_translate">_iT("(", "inline_translate")</script><span class="online-count"><script id="inline_translate">_iT("0", "inline_translate")</script></span> <script id="inline_translate">_iT("online)", "inline_translate")</script></div>
                            <div class="online-filter checkbox checked"> <script id="inline_translate">_iT("show online only", "inline_translate")</script></div>
                            <div class="scrollable">
                            </div>
                            <div class="template">
                                <div class="friend-box">
                                    <div class="portrait-box">
                                        <div class="portrait"></div>
                                    </div><div class="info-box">
                                        <div class="name"></div>
                                        <div class="status online"><script id="inline_translate">_iT("Online", "inline_translate")</script></div>
                                        <div class="status offline"><script id="inline_translate">_iT("Offline", "inline_translate")</script></div>
                                        <div class="friend-invite button"><script id="inline_translate">_iT("send invitation!", "inline_translate")</script></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="close"></div>
                </div>
            </div>
        </div>
        <div class="template">
            <div class="game">
                <div class="template">
                    <div class="energy_meter">
                        <canvas class="bar" width="295" height="16"></canvas>
                        <div class="label"><script id="inline_translate">_iT("100/100", "inline_translate")</script></div>
                    </div>
                </div>
                <div class="status_bar left">
                    <div class="name"></div>
                    <div class="style-label"><script id="inline_translate">_iT("Style", "inline_translate")</script></div>
                    <div class="effect-icon icon1"><div class="tooltip"></div></div>
                    <div class="effect-icon icon2"><div class="tooltip"></div></div>
                    <div class="effect-icon icon3"><div class="tooltip"></div></div>
                    <div class="effect-icon icon4"><div class="tooltip"></div></div>
                    <div class="effect-icon icon5"><div class="tooltip"></div></div>
                    <div class="effect-icon icon6"><div class="tooltip"></div></div>
                </div>
                <div class="status_bar right">
                    <div class="name"></div>
                    <div class="style-label"><script id="inline_translate">_iT("Style", "inline_translate")</script></div>
                    <div class="effect-icon icon1"><div class="tooltip"></div></div>
                    <div class="effect-icon icon2"><div class="tooltip"></div></div>
                    <div class="effect-icon icon3"><div class="tooltip"></div></div>
                    <div class="effect-icon icon4"><div class="tooltip"></div></div>
                    <div class="effect-icon icon5"><div class="tooltip"></div></div>
                    <div class="effect-icon icon6"><div class="tooltip"></div></div>
                </div>
                <div class="aux-panel">
                    <div class="quality"></div>
                    <div class="bg-audio"></div>
                    <div class="settings-button"></div>
                </div>
                <div class="leaderboard_container_game"></div>

                <div class="stage">
                    <img class="background" src="../walkoff_img/board_background.png" draggable="false">
                    <div class="board-mask dialog-background"></div>
                    <div class="turn_status">
                        <div class="end-game-message"></div>

                        <div class="turn_indicator left">
                            <img src="../walkoff_img/turn_indicator_left.apng" draggable="false">
                        </div>
                        <div class="turn_indicator right">
                            <img src="../walkoff_img/turn_indicator_right.apng" draggable="false">
                        </div>
                        <div class="countdown">
                            <div class="number tens digit_0"></div>
                            <div class="number ones digit_0"></div>
                            <div class="transition">
                                <div class="number tens digit_0"></div>
                                <div class="number ones digit_0"></div>
                            </div>
                        </div>
                    </div>
                    <div class="template">
                        <div class="walk-off-plaque">
                            <div class="meter-background"></div>
                            <div class="button-background"></div>
                            <canvas class="mask" width="45" height="45"></canvas>
                            <div class="gem-count"><script id="inline_translate">_iT("0/8", "inline_translate")</script></div>
                            <div class="gem-count-overlay"></div>
                            <div class="glow-hover"></div>
                            <div class="move-icon"></div>
                            <div class="gem-icon"></div>
                            <div class="frost"></div>
                            <div class="label">
                                <div class="name"><script id="inline_translate">_iT("Cold Shoulder", "inline_translate")</script></div>
                                <div class="ready"><script id="inline_translate">_iT("READY!", "inline_translate")</script></div>
                            </div>
                            <div class="reticle"></div>
                            <div class="gem-count-hotspot"><div class="gemtooltip"></div></div>
                            <div class="tooltip"></div>
                        </div>
                    </div>
                    <div class="plaques left"></div>
                    <div class="plaques right"></div>
                    <img class="front" src="../walkoff_img/board_front.png" draggable="false">
                    <div class="outer-board">
                        <div class="template">
                            <div class="gem_holder"><div class="gem"></div></div>
                        </div>
                        <div class="board"></div>
                        <div class="score-breakdown-tray">
                            <div class="score-breakdown">
                                <div class="title"><script id="inline_translate">_iT("Score Breakdown", "inline_translate")</script></div>
                                <div class="close"></div>
                                <div class="scroll-area">
                                    <div class="scroll-pane"></div>
                                </div>
                                <div class="box-bottom"></div>
                            </div>
                            <div class="shadow"></div>
                        </div>
                    </div>
                    <div class="oos_message"><script id="inline_translate">_iT("GEMS OUT OF SYNC - CORRECTED", "inline_translate")</script></div>
                    <div class="ready-waiting in-board-background">
                        <div class="in-board">
                            <div class="message"><script id="inline_translate">_iT("Waiting for your opponent to select style moves...", "inline_translate")</script></div>
                        </div>
                    </div>
                    <div class="end-game-dialog in-board-background">
                        <div class="in-board">
                            <div class="content">
                                <div class="summary">
                                    <div class="total-desc">
                                        <div class="standard-content"><script id="inline_translate">_iT("Total Style Score :", "inline_translate")</script></div>
                                        <div class="high-score-content"><div class="label"><script id="inline_translate">_iT("New High Score on the VIP Leaderboard", "inline_translate")</script></div></div>
                                    </div>
                                    <div class="total-score"></div>
                                    <div class="score-breakdown-button small-button"><script id="inline_translate">_iT("see score details", "inline_translate")</script></div>
                                </div>
                                <div class="victory-text"></div>
                                <div class="defeat-text"><script id="inline_translate">_iT("You played well but you lost.", "inline_translate")</script></div>
                                <div class="unlock-notify">
                                    <div class="gradient"></div>
                                    <div class="unlock-title">
                                        <div class="unlock-icon"></div><script id="inline_translate">_iT("Unlocked New Style Move", "inline_translate")</script>
                                    </div>
                                    <div class="reward-box">
                                        <div class="icon">
                                            <div class="background-color"></div>
                                            <div class="mask"></div>
                                            <div class="move-icon"></div>
                                        </div>
                                        <div class="info">
                                            <div class="name"><script id="inline_translate">_iT("Style Move Name", "inline_translate")</script></div>
                                            <div class="descr"><script id="inline_translate">_iT("Description of the style move.", "inline_translate")</script></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="button-bar">
                                    <div class="menu-button button"><script id="inline_translate">_iT("Menu", "inline_translate")</script></div>
                                    <div class="rematch-button button"><script id="inline_translate">_iT("Rematch", "inline_translate")</script></div>
                                </div>
                                <div class="add-friend">
                                    <div class="add-friend-icon"></div>
                                    <span class="text"><script id="inline_translate">_iT("Add", "inline_translate")</script> <span class="add-friend-name"><script id="inline_translate">_iT("NAME", "inline_translate")</script></span> <script id="inline_translate">_iT("as Friend", "inline_translate")</script></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="electric_arc"></div>
                <div class="text_effect_container">
                </div>

                <div class="speech-right"></div>

                <div class="qa-panel">
                    <div class="add-gems-button"><script id="inline_translate">_iT("Add gems", "inline_translate")</script></div>
                </div>

                <div class="greenroom-dialog dialog-background">
                    <div class="info-dialog greenroom-size">
                        <div class="greenroom-panel waiting">
                            <div class="title"><script id="inline_translate">_iT("Welcome to Walk Off", "inline_translate")</script></div>
                            <div class="message quickmatch"><script id="inline_translate">_iT("Waiting for another player to join", "inline_translate")</script><span class="loading-dots"></span></div>
                            <div class="message invite"><script id="inline_translate">_iT("Waiting for your invitation to be accepted", "inline_translate")</script><span class="loading-dots"></span></div>
                            <div class="message invitee"><script id="inline_translate">_iT("Waiting to connect", "inline_translate")</script><span class="loading-dots"></span></div>
                        </div>
                        <div class="greenroom-panel starting">
                            <div class="title"><script id="inline_translate">_iT("Connected!", "inline_translate")</script></div>
                            <div class="message"><script id="inline_translate">_iT("Starting game...", "inline_translate")</script></div>
                        </div>
                        <div class="greenroom-panel instruction">
                            <div class="title"><script id="inline_translate">_iT("how to play Walk Off", "inline_translate")</script></div>
                            <div class="images">
                                <img src="../walkoff_img/howto_splash.png" draggable="false">
                            </div>
                            <div class="more-info"><script id="inline_translate">_iT("For more detailed instructions, click on \"How to Play\" in the Main Menu.", "inline_translate")</script></div>
                            <div class="countdown-holder">
                                <script id="inline_translate">_iT("Match starts in:", "inline_translate")</script>
                                <div class="countdown">
                                    <div class="number tens digit_0"></div>
                                    <div class="number ones digit_0"></div>
                                    <div class="transition">
                                        <div class="number tens digit_0"></div>
                                        <div class="number ones digit_0"></div>
                                    </div>
                                </div>
                                <script id="inline_translate">_iT("seconds", "inline_translate")</script>
                            </div>
                            <div class="button-bar">
                                <div class="ready button"><script id="inline_translate">_iT("Ready", "inline_translate")</script></div>
                            </div>
                        </div>
                        <div class="greenroom-panel select">
                            <div class="title"><script id="inline_translate">_iT("Style Move Selection", "inline_translate")</script></div>
                            <div class="help-text"></div>
                            <div class="power box">
                                <div class="title"><script id="inline_translate">_iT("Available Style Moves", "inline_translate")</script></div>
                                <div class="content">
                                    <div class="scroll-area"></div>
                                </div>
                            </div>
                            <div class="template">
                                <div class="available-power-move">
                                    <canvas class="pie" width="300" height="300"></canvas>
                                    <div class="mask"></div>
                                    <div class="move-icon"></div>
                                    <div class="gray-out"></div>
                                    <div class="select-msg"><script id="inline_translate">_iT("Selected", "inline_translate")</script></div>
                                    <div class="lock"></div>
                                    <div class="label"></div>
                                    <div class="glow-hover"></div>
                                    <div class="reticle"></div>
                                    <div class="tooltip"></div>
                                </div>
                            </div>
                            <div class="countdown-holder">
                                <script id="inline_translate">_iT("Match starts in:", "inline_translate")</script>
                                <div class="countdown">
                                    <div class="number tens digit_0"></div>
                                    <div class="number ones digit_0"></div>
                                    <div class="transition">
                                        <div class="number tens digit_0"></div>
                                        <div class="number ones digit_0"></div>
                                    </div>
                                </div>
                                <script id="inline_translate">_iT("seconds", "inline_translate")</script>
                            </div>
                            <div class="button-bar">
                                <div class="ready button"><script id="inline_translate">_iT("Ready", "inline_translate")</script></div>
                            </div>
                        </div>
                        <div class="close"></div>
                    </div>
                </div>
                <div class="cancel-dialog dialog-background">
                    <div class="info-dialog">
                        <div class="title"><script id="inline_translate">_iT("Game cancelled", "inline_translate")</script></div><br>
                        <div class="text"><script id="inline_translate">_iT("Your opponent has left the game.", "inline_translate")</script></div>
                        <div class="close to-menu"></div>
                    </div>
                </div>
                <div class="decline-dialog dialog-background">
                    <div class="info-dialog">
                        <div class="title"><span class="name"><script id="inline_translate">_iT("name", "inline_translate")</script></span> <script id="inline_translate">_iT("has declined your invitation", "inline_translate")</script></div>
                        <div class="option">
                            <div class="label"><script id="inline_translate">_iT("Play with random players?", "inline_translate")</script></div>
                            <div class="button quickmatch"><script id="inline_translate">_iT("Quick Match", "inline_translate")</script></div>
                        </div>
                        <div class="option">
                            <div class="label"><script id="inline_translate">_iT("Invite another friend?", "inline_translate")</script></div>
                            <div class="button invite"><script id="inline_translate">_iT("Invite Friends", "inline_translate")</script></div>
                        </div>
                        <div class="close to-menu"></div>
                    </div>
                </div>
                <div class="invite-timeout-dialog dialog-background">
                    <div class="info-dialog">
                        <div class="title inviter"><script id="inline_translate">_iT("Sorry!", "inline_translate")</script>  <span class="name"><script id="inline_translate">_iT("name", "inline_translate")</script></span> <script id="inline_translate">_iT("did not respond&#8230;", "inline_translate")</script></div>
                        <div class="title invitee"><script id="inline_translate">_iT("Sorry!", "inline_translate")</script>  <span class="name"><script id="inline_translate">_iT("name", "inline_translate")</script></span> <script id="inline_translate">_iT("has left&#8230;", "inline_translate")</script></div>
                        <div class="option">
                            <div class="button invite-again"><script id="inline_translate">_iT("Invite Again", "inline_translate")</script></div>
                        </div>
                        <div class="option">
                            <div class="label"><script id="inline_translate">_iT("Play with random players?", "inline_translate")</script></div>
                            <div class="button quickmatch"><script id="inline_translate">_iT("Quick Match", "inline_translate")</script></div>
                        </div>
                        <div class="option">
                            <div class="label"><script id="inline_translate">_iT("Invite another friend?", "inline_translate")</script></div>
                            <div class="button invite"><script id="inline_translate">_iT("Invite Friends", "inline_translate")</script></div>
                        </div>
                        <div class="close to-menu"></div>
                    </div>
                </div>
                <div class="crowd-strip"></div>
            </div>
        </div>
        <div class="template">
            <div class="settings-panel playing">
                <div class="options">
                    <div class="check-button best-graphics">
                        <span class="checkbox"></span>
                        <span class="label"><script id="inline_translate">_iT("Best Graphics", "inline_translate")</script></span>
                    </div>
                    <div class="check-button sound-effects">
                        <span class="checkbox checked"></span>
                        <span class="label"><script id="inline_translate">_iT("Sound Effects", "inline_translate")</script></span>
                    </div>
                </div>
                <div class="separator"></div>
                <div class="music-settings">
                    <div class="label"><script id="inline_translate">_iT("Now Playing", "inline_translate")</script></div>
                    <div class="track-name"><script id="inline_translate">_iT("&nbsp;\"", "inline_translate")</script><span class="name"><script id="inline_translate">_iT("jdfhsdfh sdh fdhjklsdf hjklsdfh jkldfh df h", "inline_translate")</script></span><script id="inline_translate">_iT("\"&nbsp;", "inline_translate")</script></div>
                    <div class="track-controls">
                        <div class="music-button previous"></div>
                        <div class="music-button stop"></div>
                        <div class="music-button play"></div>
                        <div class="music-button next"></div>
                    </div>
                </div>
            </div>

            <div class="loading-dialog menu">
              <div class="dialog">
                <div class="logo"></div>
                <div class="page one"><img src="../walkoff_img/Loading_visual.png"></div>
                <div class="page two"><img src="../walkoff_img/Loading_howtoplay_1.png"></div>
                <div class="page three"><img src="../walkoff_img/Loading_howtoplay_2.png"></div>
                <div class="caption"><script id="inline_translate">_iT("loading game", "inline_translate")</script><span class="ellipses"><span class="one"><script id="inline_translate">_iT(".", "inline_translate")</script></span><span class="two"><script id="inline_translate">_iT(".", "inline_translate")</script></span><span class="three"><script id="inline_translate">_iT(".", "inline_translate")</script></span></span></div>
                <div class="progress-bar"><div class="current-progress"></div></div>
              </div>
            </div>
        </div>
    </div>
    <script>
        if (IMVU.runJS()) {
            if (IMVU.IS_FIREFOX) {
                imvu.default_call = imvu.call;
                imvu.call = function(func, arg) {
                    if (func === 'shouldShowAddFriendButton') {
                        return arg !== 39;
                    } else if (func === 'hasVIPPass') {
                        return false;
                    } else if (func === 'shouldShowHackWeekGreenroom') {
                        return false;
                    } else if (func === 'getFeatureAccessLevel') {
                        return 'full';
                    } else if (func === 'shouldShowFirstTimeInstructions') {
                        return false;
                    } else if (func === 'translate') {
                        return arg;
                    } else if (func === 'isGlobalLeaderboardVIPOnly') {
                        return true;
                    } else if (func === 'getPromoText') {
                        return {visible: true, title: 'Title Text', body: 'Body Text'};
                    } else if (func === 'getCustomerId') {
                        return 1042;
                    } else {
                        return imvu.default_call(func,arg);
                    }
                };
                var responses = [];
                var requests = [];
                IMVU.Network._respond = function (url, obj) {
                    responses.push({url: url, obj: obj});
                };
                IMVU.Network.asyncRequest = function (method, url, callback, postData) {
                    requests.push({method: method, url: url, callback: callback, postData: postData});
                    window.setTimeout(fulfillRequests, 1);
                };
                var fulfillRequests = function () {
                    while (requests.length) {
                        var r = requests.shift();
                        var response = responses.shift();
                        if (response) {
                            r.callback.success.call(r.callback.scope, {
                                responseText: {status: 'success', data: response.obj},
                                argument : r.callback.argument
                            });
                        }
                    }
                };

                var callAsyncs = []
                IMVU.callAsync = function (name, callback, imvu) {
                    var args = Array.prototype.slice.call(arguments, 3);
                    callAsyncs.push({name: name, callback: callback, args: args});
                    window.setTimeout(fulfillCallAsyncs);
                };
                var fulfillCallAsyncs = function() {
                    while (callAsyncs.length) {
                        var call = callAsyncs.shift();
                        if (call.name === 'getAvatarInfos') {
                            var cids = call.args[0];
                            var infos = [];
                            for (cid in cids) {
                                var info = {
                                    userId: cids[cid],
                                    avatarName: 'user' + cids[cid],
                                    picUrl_40x55: '../walkoff_img/bt_settings.png'
                                };
                                infos.push(info);
                            }
                            call.callback(infos);
                        }
                    }
                };
            }
            
            IMVU.Client.ImqClient = new ImqClient(imvu, 'IMVU.Client.ImqClient');
            IMVU.Client.WalkOffMode = new WalkOffMode(
                $('#walkoff'),
                imvu,
                IMVU.Client.EventBus,
                IMVU.Network,
                new Timer(),
                {
                    pvp: WalkOffPVPService,
                    imq: IMVU.Client.ImqClient
                });
            
            if (IMVU.IS_FIREFOX) {
                var m = /\?test=([^&]*)/.exec(window.location.search);
                if (m) {
                    window['test_' + m[1]]();
                } else {
                    test_default();
                }
            }
        }

        function installResize() {
            var resize = function () {
                IMVU.Client.WalkOffMode.setCanvasArea(window.innerWidth, window.innerHeight);
            };
            $(window).resize(resize);
            resize();
        }

        function test_mainMenu() {
            installResize();

            IMVU.Network._respond('/leaderboards', {
                items: [{
                    name: 'walk_off_imvu',
                    relationships: {
                        sub_boards: '/leaderboards/walk_off_imvu'
                    }
                }]
            });
            IMVU.Network._respond('/leaderboards/walk_off_imvu', {
                items: [{
                    name: 'weekly',
                    relationships: {
                        scores: '/leaderboards/walk_off_imvu/sub_boards/weekly/scores'
                    }
                }]
            });
            var scores = [];
            for (var i = 0; i < 110; i++) {
                scores.push({
                    cid: 900 + i,
                    score: (1000 - i) * 100,
                    rank: i
                });
            }
            IMVU.Network._respond('/leaderboards/walk_off_imvu/sub_boards/weekly/scores', {
                id: '/leaderboards/walk_off_imvu/sub_boards/weekly/scores',
                items: scores
            });
            IMVU.Network._respond('/leaderboards/walk_off_imvu/sub_boards/weekly/scores/1024', {
                score: 12345,
                rank: 1000
            });
        }

        function test_default() {
            installResize();

            IMVU.Client.WalkOffMode.openGame();

            // Install frame timer.
            var frameTimer = IMVU.Client.WalkOffMode.game.frameTimer;
            window.setInterval(frameTimer.tick.bind(frameTimer), 33);

            IMVU.Client.WalkOffMode.game.cid = 39;
            IMVU.Client.WalkOffMode.game.powerMoves = {
                "vogue": {name: "Vogue", descr: "Earn +10 Style Points<br>Earn +2 Style Points for every Green or Yellow gem matched<br>Duration: 2 rounds", level:1, 'cost': {'g': 7}, 'assets': {'icon': 'icons/icon_vogue1.png', 'greenroom_icon': 'icons/move_vogue.png'}},
                "sashay": {name: "Sashay", descr: "Earn +1 Style for Yellow Gem matches for 3 turns.", level:1, 'assets': {'icon': 'icons/icon_sashay.png', 'greenroom_icon': 'icons/move_sashay.png'}},
                "icy_stare": {name: "Icy Stare", descr: "Earn +5 Style. Remove 4 seconds from opponent for [2 Turns].", level:1, 'assets': {'icon': 'icons/icon_icystare.png', 'greenroom_icon': 'icons/move_icyStart.png'}},
                "superstar": {name: "Superstar", descr: "Earn +10 Style Points. Earn +3 Style Points for every Pink gem you match. Duration: 2 rounds.", level: 2},
                "wild_one": {name: "Wild One", descr: "Earn +5 Style. Earn a random Bonus Item", level:3, 'assets': {'icon': 'icons/icon_wildone.png', 'greenroom_icon': 'icons/wildOne.png'}},
                "kiss_off": {name: "Kiss Off", descr: "Earn +5 Style. +1 Red Gems for a Red match for 3 turns and +1 Pink Gems for Pink matches", level:4, 'assets': {'icon': 'icons/icon_kissoff.png', 'greenroom_icon': 'icons/move_kissOff.png'}},
                "disco": {name: "Disco", descr: "Earn +10 Style Points<br>Earn +3 Style Points for every Pink gem you match<br>Duration: 2 rounds", level: 5},
                "hot_mess": {name: "Hot Mess", descr: "Earn +10 Style Points. Reset the current board and generate all new gems.", level: 6},
                "heartbreaker": {name: "Heartbreaker", descr: "Earn +10 Style Points. Add 4 seconds to your timer. Duration: 3 turns.", level: 7},
                "cold_shoulder": {name: "Cold Shoulder", descr: "Earn +10 Style Points. Inactivate opponent's Style Moves. Duration: 3 turns.", level: 8},
                "blue_steal": {name: "Blue Steal", descr: "Earn +10 Style Points. Steal 10 energy from opponent.", level: 8},
                "talk_to_the_hand": {name: "Talk to the Hand", descr: "Earn +5 Style Points. Blocks negative effects. Duration: 2 turns.", level: 8},
                "tiger_eyes": {name: "Tiger Eyes", descr: "Earn +10 Style Points. Highlights match 4s. Get an extra turn.", level: 8},
                "bombshell": {name: "Bombshell", descr: "Earn +40 Style Points.", level: 8},
                "ripoff": {name: "Ripoff", descr: "Take half of opponent's gems.", level: 8}
            };
            IMVU.Client.WalkOffMode.game.effects = {
                "vogue_effect": {name: "Vogue", descr: "Strike a pose!", assets: {icon: "icons/m_vogue.png"}},
                "icy_stare_effect": {name: "Icy Stare", descr: "Cower under my gaze!", assets: {icon: "icons/m_icystare.png"}}
            };
            var catalog = [
                {'type': 'move', 'move': 'vogue', 'position': 1, 'cost': {'g': 7}, 'assets': {'icon': 'icons/icon_vogue1.png', 'greenroom_icon': 'icons/move_vogue.png'}},
                {'type': 'move', 'move': 'sashay', 'position': 2, 'cost': {'r': 7}, 'assets': {'icon': 'icons/icon_sashay1.png', 'greenroom_icon': 'icons/move_sashay.png'}},
                {'type': 'move', 'move': 'icy_stare', 'position': 3, 'cost': {'b': 7}, 'assets': {'icon': 'icons/icon_icystare.png', 'greenroom_icon': 'icons/move_icyStare.png'}},
                {'type': 'move', 'move': 'superstar', 'position': 4, 'cost': {'y': 7}, 'assets': {'icon': 'icons/icon_superstar.png', 'greenroom_icon': 'icons/move_superstar.png'}},
                {'type': 'move', 'move': 'wild_one', 'position': 5, 'cost': {'r': 9}, 'assets': {'icon': 'icons/icon_wildone.png', 'greenroom_icon': 'icons/move_wildOne.png'}},
                {'type': 'move', 'move': 'kiss_off', 'position': 6, 'cost': {'p': 7}, 'assets': {'icon': 'icons/icon_kissoff.png', 'greenroom_icon': 'icons/move_kissOff.png'}},
                {'type': 'move', 'move': 'disco', 'position': 7, 'cost': {'g': 7}, 'assets': {'icon': 'icons/icon_disco.png', 'greenroom_icon': 'icons/move_disco.png'}},
                {'type': 'move', 'move': 'hot_mess', 'position': 8, 'cost': {'p': 7}, 'assets': {'icon': 'icons/icon_hotmess.png', 'greenroom_icon': 'icons/move_hotMess.png'}},
                {'type': 'move', 'move': 'heartbreaker', 'position': 9, 'cost': {'y': 6}, 'assets': {'icon': 'icons/icon_heartbreaker.png', 'greenroom_icon': 'icons/move_heartbreaker.png'}},
                {'type': 'move', 'move': 'cold_shoulder', 'position': 10, 'cost': {'b': 8}, 'assets': {'icon': 'icons/icon_coldshoulder.png', 'greenroom_icon': 'icons/move_coldShoulder.png'}},
                {'type': 'move', 'move': 'blue_steal', 'position': 10, 'cost': {'g': 4, 'b': 6}, 'assets': {'icon': 'icons/icon_coldshoulder.png', 'greenroom_icon': 'icons/move_coldShoulder.png'}},
                // {'type': 'move', 'move': 'talk_to_the_hand', 'position': 10, 'cost': {'y': 6}, 'assets': {'icon': 'icons/icon_coldshoulder.png', 'greenroom_icon': 'icons/move_coldShoulder.png'}},
                // {'type': 'move', 'move': 'tiger_eyes', 'position': 10, 'cost': {'y': 7, 'p': 2}, 'assets': {'icon': 'icons/icon_coldshoulder.png', 'greenroom_icon': 'icons/move_coldShoulder.png'}},
                // {'type': 'move', 'move': 'bombshell', 'position': 10, 'cost': {'p': 4, 'y': 4, 'g': 4, 'r': 4}, 'assets': {'icon': 'icons/icon_coldshoulder.png', 'greenroom_icon': 'icons/move_coldShoulder.png'}},
                // {'type': 'move', 'move': 'ripoff', 'position': 10, 'cost': {'p': 6, 'r': 5}, 'assets': {'icon': 'icons/icon_coldshoulder.png', 'greenroom_icon': 'icons/move_coldShoulder.png'}},
            ];

            var sendMessage = function (message) {
                IMVU.Client.WalkOffMode.game.service.onGameMessage({
                    mount: 'game_msgs',
                    user_id: 'admin',
                    message: JSON.stringify(message)
                });
            };

            var friendList = {
                'BUDDIES': {
                    '100': { 'buddy_name': 'One', 'buddy_guest': 0, 'is_online': 1, 'avpic_url': 'http://100', 'buddyItemId': 100 },
                    '200': { 'buddy_name': 'Two', 'buddy_guest': 1, 'is_online': 1, 'avpic_url': 'http://200', 'buddyItemId': 200  },
                    '300': { 'buddy_name': 'Three', 'buddy_guest': 0, 'is_online': 1, 'avpic_url': 'http://300', 'buddyItemId': 300  },
                    '400': { 'buddy_name': 'Four', 'buddy_guest': 0, 'is_online': 0, 'avpic_url': 'http://400', 'buddyItemId': 400  },
                }
            };
            IMVU.Client.WalkOffMode.updateFriendList(friendList);

            sendMessage({startgamesetup: {
                cids: ['39', '40'],
                39: {level: 1, moves: 'vogue,icy_stare,sashay'},
                40: {level: 1, moves: 'kiss_off,wild_one,vogue'},
                setup_time: 30,
                go_message_time: 1000,
                gem_shatter_time: 350,
                gem_drop_time: 150
            }});
            //IMVU.Client.WalkOffMode.game.newPowerMoves = ['vogue'];
            //IMVU.Client.WalkOffMode.game.displayDecline();
            //IMVU.Client.WalkOffMode.game.displayInviteTimeout();
            //IMVU.Client.WalkOffMode.game.displayVictory();
            //IMVU.Client.WalkOffMode.game.displayDefeat();
            //IMVU.Client.WalkOffMode.game.displayDisconnect();
            //IMVU.Client.WalkOffMode.game.displayCancel();

            //IMVU.Client.WalkOffMode.game.showGameHud();
            IMVU.Client.WalkOffMode.game.greenroom.setDescriptions(IMVU.Client.WalkOffMode.game.powerMoves);
            IMVU.Client.WalkOffMode.game.greenroom.setCatalog(catalog);
            IMVU.Client.WalkOffMode.game.greenroom.hide();
            //IMVU.Client.WalkOffMode.game.greenroom.show(true);
            //IMVU.Client.WalkOffMode.game.greenroom.show(false);
            //IMVU.Client.WalkOffMode.game.greenroom.startCountdown();

            if (1) {

                //generator = IMVU.Client.WalkOffMode.game.generator;
                //// bgrpy

                IMVU.Client.WalkOffMode.game.greenroom.handleReady();

                var testState = {activeplayer: 39,
                                 player1: '{"cid": 39, "energy": 25}',
                                 player2: '{"cid": 40, "energy": 85}',
                                 board: 'b,y,g,p,r,c,b,b,b(e:5),y(e:5),g(e:5),p(e:5),r(e:5),c(e:5),b,b,b(e:10),y(e:10),g(e:10),p(e:10),r(e:10),c(e:10),b,b,y,p,r,r,y,p,r,b,y,p,b,p,b,g,r,y,p,y,p,p,p,g,g,y,b,p,p,y,b,y,y,r,b,b,y,y,p,y,p,r'};
                IMVU.Client.WalkOffMode.game.setGameState(testState);
                IMVU.Client.WalkOffMode.game.setPlayerName(39, 'Albert');
                IMVU.Client.WalkOffMode.game.setPlayerName(40, 'Rufus');
                sendMessage({inventory: ['39', {'g': 10, 'b': 3}] });
                sendMessage({movelist: ['39', {
                    'vogue': {'cost': {'g': 7}, 'enabled': true},
                    'icy_stare': {'cost': {'b': 7}, 'enabled': false},
                    'wild_one': {'cost': {'p': 7}, 'enabled': false}
                }]});
                sendMessage({movelist: ['40', {
                    'wild_one': {'cost': {'r': 7}, 'enabled': true},
                    'sashay': {'cost': {'y': 7}, 'enabled': false},
                    'kiss_off': {'cost': {'r': 7}, 'enabled': false}
                }]});
                sendMessage({effectlist: ['39', ["vogue_effect","icy_stare_effect"]]})
                sendMessage({effectlist: ['40', ["vogue_effect","icy_stare_effect"]]})
                sendMessage({ taketurn: ['39', 99]});
                
    
                // sendMessage({newpowermoves : ['39', ['vogue']] });

                sendMessage({game_summary: {
                    '39': {
                        'game_style': 9380,
                        'breakdown': [
                            {'name': 'Win','points': 1040},
                            {'name': 'Match 3','points': 500},
                            {'name': 'Match 4','points': 500},
                            {'name': 'Match 5','points': 0},
                            {'name': 'Match 6','points': 0},
                            {'name': 'Match 7+','points': 0},
                            {'name': 'Cascade Bonus','points': 100},
                            {'name': 'Use a Style Move','points': 2250},
                            {'name': 'Streak Bonus','points': 0},
                            {'name': 'Perfect Game','points': 300}
                        ],
                        'multiplier': {tag: 'Multiplier', multiplier: 1.5},
                        'game_high_scores': [{
                            'rank': 529,
                            'board_name':'weekly',
                            'url':'https:\\/\\/api.imvu.com\\/leaderboards\\/walk_off_imvu\\/sub_boards\\/weekly\\/scores\\/39'
                        }]
                    },
                    '40': {
                        'game_style': 1050,
                        'breakdown':  [
                            {'name': 'Lose','points': 50},
                            {'name': 'Match 3','points': 500},
                            {'name': 'Match 4','points': 500},
                            {'name': 'Match 5','points': 0},
                            {'name': 'Match 6','points': 0},
                            {'name': 'Match 7+','points': 0},
                            {'name': 'Cascade Bonus','points': 0},
                            {'name': 'Use a Style Move','points': 0},
                            {'name': 'Streak Bonus','points': 0}
                        ],
                        'multiplier': {tag: 'Multiplier', multiplier: 1.5},
                        'game_high_scores': false
                }}});

                sendMessage({gameover: ['39','victory']});
                sendMessage({gameover: ['40','victory']});

                IMVU.Client.WalkOffMode.game.setStageClickable(true);
            }
        }

        function test_loadingDialog() {
            var ld = new LoadingDialog(window);
            ld.show();

            var progress = 0;
            var theInterval = setInterval(increment, 1000);

            function increment() {
                progress += 0.05;
                console.log("PRgorr " + progress);
                ld.setProgress(progress);

                if (progress >= 1.0) {
                    clearInterval(theInterval);
                }
            }
        }
    </script>
</body></html>